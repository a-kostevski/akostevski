{{ define "main" }}
<article class="prose prose-lg dark:prose-invert prose-blue max-w-none">
  <header class="mb-8 not-prose">
    {{- /* Breadcrumbs */ -}}
    {{ if .Site.Params.ShowBreadCrumbs }}
    <nav class="text-sm text-gray-500 dark:text-gray-400 mb-4">
      <a href="{{ .Site.BaseURL }}" class="hover:text-gray-700 dark:hover:text-gray-200">Home</a>
      {{ range .Ancestors.Reverse }}
      <span class="mx-2">/</span>
      <a href="{{ .Permalink }}" class="hover:text-gray-700 dark:hover:text-gray-200">{{ .Title }}</a>
      {{ end }}
    </nav>
    {{ end }}

    <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">{{ .Title }}</h1>

    {{- /* Post meta */ -}}
    <div class="flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400">
      {{ if .Date }}
      <time datetime="{{ .Date.Format "2006-01-02" }}">
        {{ .Date.Format "January 2, 2006" }}
      </time>
      {{ end }}

      {{ if .Site.Params.ShowReadingTime }}
      <span>&middot;</span>
      <span>{{ .ReadingTime }} min read</span>
      {{ end }}

      {{ with .Params.tags }}
      <span>&middot;</span>
      <div class="flex flex-wrap gap-2">
        {{ range . }}
        <a href="{{ "tags/" | relURL }}{{ . | urlize }}" class="text-blue-600 dark:text-blue-400 hover:underline">#{{ . }}</a>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </header>

  {{- /* Table of Contents */ -}}
  {{ if and .Site.Params.ShowToc .TableOfContents }}
  <details class="not-prose mb-8 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg" {{ if .Site.Params.TocOpen }}open{{ end }}>
    <summary class="cursor-pointer font-semibold text-gray-900 dark:text-white">Table of Contents</summary>
    <nav class="mt-4 text-sm">
      {{ .TableOfContents }}
    </nav>
  </details>
  {{ end }}

  {{- /* Content */ -}}
  <div class="content">
    {{ .Content }}
  </div>

  {{- /* Backlinks */ -}}
  {{ partial "backlinks.html" . }}

  {{- /* Post navigation */ -}}
  {{ if .Site.Params.ShowPostNavLinks }}
  <nav class="not-prose mt-12 pt-8 border-t border-gray-200 dark:border-gray-700 flex justify-between">
    {{ with .PrevInSection }}
    <a href="{{ .Permalink }}" class="group flex flex-col items-start">
      <span class="text-sm text-gray-500 dark:text-gray-400">Previous</span>
      <span class="text-blue-600 dark:text-blue-400 group-hover:underline">{{ .Title }}</span>
    </a>
    {{ else }}
    <div></div>
    {{ end }}

    {{ with .NextInSection }}
    <a href="{{ .Permalink }}" class="group flex flex-col items-end text-right">
      <span class="text-sm text-gray-500 dark:text-gray-400">Next</span>
      <span class="text-blue-600 dark:text-blue-400 group-hover:underline">{{ .Title }}</span>
    </a>
    {{ end }}
  </nav>
  {{ end }}
</article>
{{ end }}
